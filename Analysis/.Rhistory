load("Data/SSB_master.RData")
glimpse(SSB_master)
library("survey")
SSB_master <- subset( SSB_master , !is.na(final_weight))
design <- svydesign(data = SSB_master,
id = ~1,
strata  = ~ststr,
weights = ~final_weight,
nest = TRUE)
#setting for how to deal with a psu with a single observation
options(survey.lonely.psu = "adjust")
#N table
(n_table <- table(SSB_master$ssb_cat2, useNA = "always"))
# weighted proportion table
n_svy <- svytable(~ssb_cat2, design = design)
n_prop <- prop.table(n_svy)
# AGE
# frequency table
age_table <- table(SSB_master$age_cat,
SSB_master$ssb_cat2,
deparse.level = 2) # No NAs
# weighted proportion table
age_svy <- svytable(~age_cat + ssb_cat2, design = design)
age_prop <- prop.table(age_svy, 2)
# SEX
# frequency table
sex_table <- table(SSB_master$sex_01,
SSB_master$ssb_cat2,
deparse.level = 2) # No NAs
# weighted proportion table
sex_svy <- svytable(~sex_01 + ssb_cat2, design = design)
sex_prop <- prop.table(sex_svy, 2)
# EDUCATION
# frequency table
education_table <- table(SSB_master$education,
SSB_master$ssb_cat2,
deparse.level = 2) # Less than 5% NA
# weighted proportion table
education_svy <- svytable(~education + ssb_cat2, design = design)
education_prop <- prop.table(education_svy, 2)
# INCOME
# frequency table
#(income_table <- table(SSB_master$income_cat,
#                       SSB_master$ssb_cat,
#                       deparse.level = 2, useNA = "always"))
#
# weighted proportion table
#income_svy <- svytable(~income_cat + ssb_cat, design = design)
#prop.table(income_svy, 2)
# EXERCISE
# frequency table
exercise_table <- table(SSB_master$exercise_01,
SSB_master$ssb_cat2,
deparse.level = 2) # Less than 5% NA
# weighted proportion table
exercise_svy <- svytable(~exercise_01 + ssb_cat2, design = design)
exercise_prop <- prop.table(exercise_svy, 2)
# MENTAL HEALTH
# frequency table
mental_table <- table(SSB_master$mental,
SSB_master$ssb_cat2,
deparse.level = 2) # Less than 5% NA
# weighted proportion table
mental_svy <- svytable(~mental + ssb_cat2, design = design)
mental_prop <- prop.table(mental_svy, 2)
# DIABETES
# frequency table
diabetes_table <- table(SSB_master$diabetes_01,
SSB_master$ssb_cat2,
deparse.level = 2) # Less than 5% NA
# weighted proportion table
diabetes_svy <- svytable(~diabetes_01 + ssb_cat2, design = design)
diabetes_prop <- prop.table(diabetes_svy, 2)
# SMOKING
# frequency table
smoking_table <- table(SSB_master$smoking_01,
SSB_master$ssb_cat2,
deparse.level = 2) # Less than 5% NA
# weighted proportion table
smoking_svy <- svytable(~smoking_01 + ssb_cat2, design = design)
smoking_prop <- prop.table(smoking_svy, 2)
# BMI
# frequency table
bmi_table <- table(SSB_master$bmi_cat,
SSB_master$ssb_cat2,
deparse.level = 2, useNA = "always")
# <1 category missing more than 5%
# weighted proportion table
bmi_svy <- svytable(~bmi_cat + ssb_cat2, design = design)
bmi_prop <- prop.table(bmi_svy, 2)
# ALCOHOL
# frequency table
# (alcohol_table <- table(SSB_master$alcohol_cat,
#                        SSB_master$ssb_cat,
#                        deparse.level = 2, useNA = "always"))
# weighted proportion table
#alcohol_svy <- svytable(~alcohol_cat + ssb_cat, design = design)
#prop.table(alcohol_svy, 2)
knitr::opts_chunk$set(echo = TRUE)
if (Sys.getenv("USER") == "david") {
knitr::opts_knit$set(root.dir = "/Users/david/Desktop/Dave/school/Epi 514/Final Project/Analysis/")
}
#Matt's system
if (Sys.getenv("USER") == "msgoldberg") {
knitr::opts_knit$set(root.dir = "/Users/msgoldberg/Desktop/Grad_School/Year_1/Q3/EPI514/SSB_Paper/")
}
if (Sys.getenv("USER") == "jscho") {
knitr::opts_knit$set(root.dir = "C:/Users/jscho/OneDrive - UW/SPRING 2020-LAPTOP-7K6NFTGB/EPI 514/")
}
library(tidyverse) #suite of packages for data cleaning and manipulation
library(epiR) #basic epi tools including stratified analysis with Mantel Haenszel
library(survey) #survey package to calculate survey sample weighted prevalence
if (!require(sjPlot)) install.packages("sjPlot")
library(sjPlot)
if (!require(stargazer)) install.packages("stargazer")
library(stargazer)
if (!require(kableExtra)) install.packages("kableExtra")
library(kableExtra)
if (!require(htmlTable)) install.packages("htmlTable")
library(htmlTable)
library(dplyr)
# If you want the CSV choose this option
#data <- read_csv("Data/SSB_master.csv")
# For R data file
load("Data/SSB_master.RData")
data <- SSB_master
#DMC - why is there no cluster design in the weights?
#creating survey weight object
design <- svydesign(ids = ~1,
weights= ~final_weight,
strata = ~ststr,
data=data)
options(survey.lonely.psu = "adjust") #setting for how to deal with a psu with a single observation
data$sleep_01 <- fct_relevel(data$sleep_01,
"<7 Hours of Sleep", "7+ Hours of Sleep")
data$ssb_cat2_low <- as.numeric(data$ssb_cat2)
table(data$ssb_cat2_low)
data$ssb_cat2_low[data$ssb_cat2_low==3] <- NA
data$ssb_cat2_low <- factor(data$ssb_cat2_low,
levels=c(2,1),
labels=c("(0-1) SSB per Day", "0 SSB per Day"))
# Create binary exposure variable - (1+) vs 0 (reference category)
data$ssb_cat2_high <- as.numeric(data$ssb_cat2)
table(data$ssb_cat2_high)
data$ssb_cat2_high[data$ssb_cat2_high==2] <- NA
data$ssb_cat2_high <- factor(data$ssb_cat2_high,
levels=c(3,1),
labels=c("1+ SSB per Day", "0 SSB per Day"))
#Check newly coded variables
with(data, table(ssb_cat2_low, ssb_cat2))
with(data, table(ssb_cat2_high, ssb_cat2))
#Checking sleep X ssb tables
base_table_low <- with(data, table(ssb_cat2_low, sleep_01))
base_table_low
base_table_high <- with(data, table(ssb_cat2_high, sleep_01))
base_table_high
#Tables set up correctly
# Change factor covariates into numeric
data$age_cat <- as.numeric(data$age_cat)
data$sex_01 <- as.numeric(data$sex_01)
data$education <- as.numeric(data$education)
data$exercise_01 <- as.numeric(data$exercise_01)
data$mental <- as.numeric(data$mental)
data$diabetes_01 <- as.numeric(data$diabetes_01)
data$smoking_01 <- as.numeric(data$smoking_01)
data$bmi_cat <- as.numeric(data$bmi_cat)
adj_table_low <- with(data, table(ssb_cat1_low, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_low <- with(data, table(ssb_cat2_low, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_high <- with(data, table(ssb_cat2_high, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_low <- with(data, table(ssb_cat2_low, sleep_01,
age_cat+sex_01+exercise_01+diabetes_01+smoking_01+bmi_cat))
#unadjusted low PR
low_base <- epi.2by2(base_table_low, method="cross.sectional")
#unadjusted high PR
high_base <- epi.2by2(base_table_high, method="cross.sectional")
#adjusted low PR
low_adj <- epi.2by2(adj_table_low, method="cross.sectional")
#adjusted high PR
high_adj <- epi.2by2(adj_table_high, method="cross.sectional")
#unadjusted low PR
((low_base <- epi.2by2(base_table_low, method="cross.sectional"))
#unadjusted low PR
(low_base <- epi.2by2(base_table_low, method="cross.sectional"))
knitr::opts_chunk$set(echo = TRUE)
if (Sys.getenv("USER") == "david") {
knitr::opts_knit$set(root.dir = "/Users/david/Desktop/Dave/school/Epi 514/Final Project/Analysis/")
}
#Matt's system
if (Sys.getenv("USER") == "msgoldberg") {
knitr::opts_knit$set(root.dir = "/Users/msgoldberg/Desktop/Grad_School/Year_1/Q3/EPI514/SSB_Paper/")
}
if (Sys.getenv("USER") == "jscho") {
knitr::opts_knit$set(root.dir = "C:/Users/jscho/OneDrive - UW/SPRING 2020-LAPTOP-7K6NFTGB/EPI 514/")
}
library(tidyverse) #suite of packages for data cleaning and manipulation
library(epiR) #basic epi tools including stratified analysis with Mantel Haenszel
library(survey) #survey package to calculate survey sample weighted prevalence
if (!require(sjPlot)) install.packages("sjPlot")
library(sjPlot)
if (!require(stargazer)) install.packages("stargazer")
library(stargazer)
if (!require(kableExtra)) install.packages("kableExtra")
library(kableExtra)
if (!require(htmlTable)) install.packages("htmlTable")
library(htmlTable)
library(dplyr)
# If you want the CSV choose this option
#data <- read_csv("Data/SSB_master.csv")
# For R data file
load("Data/SSB_master.RData")
data <- SSB_master
#DMC - why is there no cluster design in the weights?
#creating survey weight object
design <- svydesign(ids = ~1,
weights= ~final_weight,
strata = ~ststr,
data=data)
options(survey.lonely.psu = "adjust") #setting for how to deal with a psu with a single observation
#setting up outcome in the correct format
data$sleep_01 <- fct_relevel(data$sleep_01,
"<7 Hours of Sleep", "7+ Hours of Sleep")
# Split exposure variable into 2 binary variables
# Create binary exposure variable - (0-1) vs 0 (reference category)
data$ssb_cat2_low <- as.numeric(data$ssb_cat2)
table(data$ssb_cat2_low)
data$ssb_cat2_low[data$ssb_cat2_low==3] <- NA
data$ssb_cat2_low <- factor(data$ssb_cat2_low,
levels=c(2,1),
labels=c("(0-1) SSB per Day", "0 SSB per Day"))
# Create binary exposure variable - (1+) vs 0 (reference category)
data$ssb_cat2_high <- as.numeric(data$ssb_cat2)
table(data$ssb_cat2_high)
data$ssb_cat2_high[data$ssb_cat2_high==2] <- NA
data$ssb_cat2_high <- factor(data$ssb_cat2_high,
levels=c(3,1),
labels=c("1+ SSB per Day", "0 SSB per Day"))
#Check newly coded variables
with(data, table(ssb_cat2_low, ssb_cat2))
with(data, table(ssb_cat2_high, ssb_cat2))
#SSB tables coded correctly
#Checking sleep X ssb tables
base_table_low <- with(data, table(ssb_cat2_low, sleep_01))
base_table_low
base_table_high <- with(data, table(ssb_cat2_high, sleep_01))
base_table_high
#Tables set up correctly
# Change factor covariates into numeric
data$age_cat <- as.numeric(data$age_cat)
data$sex_01 <- as.numeric(data$sex_01)
data$education <- as.numeric(data$education)
data$exercise_01 <- as.numeric(data$exercise_01)
data$mental <- as.numeric(data$mental)
data$diabetes_01 <- as.numeric(data$diabetes_01)
data$smoking_01 <- as.numeric(data$smoking_01)
data$bmi_cat <- as.numeric(data$bmi_cat)
# Setting up covariates into tables
adj_table_low <- with(data, table(ssb_cat2_low, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_high <- with(data, table(ssb_cat2_high, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_low <- with(data, table(ssb_cat2_low, sleep_01,
age_cat+sex_01+exercise_01+diabetes_01+smoking_01+bmi_cat))
#adding mental and BMI changes the crude PR - why is this?
(low_base <- epi.2by2(base_table_low, method="cross.sectional"))
(high_base <- epi.2by2(base_table_high, method="cross.sectional"))
(low_adj <- epi.2by2(adj_table_low, method="cross.sectional"))
#adjusted high PR
(high_adj <- epi.2by2(adj_table_high, method="cross.sectional"))
no_hs <- subset(data, data$education==1)
hs <- subset(data, data$education==2)
some_coll <- subset(data, data$education==3)
coll <- subset(data, data$education==4)
no_hs_table_low <- with(no_hs, table(ssb_cat2_low, sleep_01, age_cat+sex_01+exercise_01))
no_hs_table_high <- with(no_hs, table(ssb_cat2_high, sleep_01, age_cat+sex_01+exercise_01))
hs_table_low <- with(hs, table(ssb_cat2_low, sleep_01, age_cat+sex_01+exercise_01))
hs_table_high <- with(hs, table(ssb_cat2_high, sleep_01, age_cat+sex_01+exercise_01))
some_coll_table_low <- with(some_coll, table(ssb_cat2_low, sleep_01, age_cat+sex_01+exercise_01))
some_coll_table_high <- with(some_coll, table(ssb_cat2_high, sleep_01, age_cat+sex_01+exercise_01))
coll_table_low <- with(coll, table(ssb_cat2_low, sleep_01, age_cat+sex_01+exercise_01))
coll_table_high <- with(coll, table(ssb_cat2_high, sleep_01, age_cat+sex_01+exercise_01))
(low_no_hs <- epi.2by2(no_hs_table_low, method="cross.sectional"))
(high_no_hs <- epi.2by2(no_hs_table_high, method="cross.sectional"))
(low_hs <- epi.2by2(hs_table_low, method="cross.sectional"))
(high_hs <- epi.2by2(hs_table_high, method="cross.sectional"))
(low_some_coll <- epi.2by2(some_coll_table_low, method="cross.sectional"))
(high_some_coll <- epi.2by2(some_coll_table_high, method="cross.sectional"))
(low_coll <- epi.2by2(coll_table_low, method="cross.sectional"))
(high_coll <- epi.2by2(coll_table_high, method="cross.sectional"))
#setting up education stratified variables
#subsetting data
age_18_24 <- subset(data, data$age==1)
age_25_34 <- subset(data, data$age==2)
age_35_44 <- subset(data, data$age==3)
age_45_54 <- subset(data, data$age==4)
age_55_64 <- subset(data, data$age==5)
age_65 <- subset(data, data$age==6)
#setting up tables - two for each education level and remove education from covariate list
age_18_24_low <- with(age_18_24, table(ssb_cat2_low, sleep_01, sex_01+education+exercise_01))
age_18_24_high <- with(age_18_24, table(ssb_cat2_high, sleep_01, sex_01+education+exercise_01))
age_25_34_low <- with(age_25_34, table(ssb_cat2_low, sleep_01, sex_01+education+exercise_01))
age_25_34_high <- with(age_25_34, table(ssb_cat2_high, sleep_01, sex_01+education+exercise_01))
age_35_44_low <- with(age_35_44, table(ssb_cat2_low, sleep_01, sex_01+education+exercise_01))
age_35_44_high <- with(age_35_44, table(ssb_cat2_high, sleep_01, sex_01+education+exercise_01))
age_45_54_low <- with(age_45_54, table(ssb_cat2_low, sleep_01, sex_01+education+exercise_01))
age_45_54_high <- with(age_45_54, table(ssb_cat2_high, sleep_01, sex_01+education+exercise_01))
age_55_64_low <- with(age_55_64, table(ssb_cat2_low, sleep_01, sex_01+education+exercise_01))
age_55_64_high <- with(age_55_64, table(ssb_cat2_high, sleep_01, sex_01+education+exercise_01))
age_65_low <- with(age_65, table(ssb_cat2_low, sleep_01, sex_01+education+exercise_01))
age_65_high <- with(age_65, table(ssb_cat2_high, sleep_01, sex_01+education+exercise_01))
(low_age_18_24 <- epi.2by2(age_18_24_low, method="cross.sectional"))
(high_age_18_24 <- epi.2by2(age_18_24_high, method="cross.sectional"))
(low_age_25_34 <- epi.2by2(age_25_34_low, method="cross.sectional"))
(high_age_25_34 <- epi.2by2(age_25_34_high, method="cross.sectional"))
(low_age_35_44 <- epi.2by2(age_35_44_low, method="cross.sectional"))
(high_age_35_44 <- epi.2by2(age_35_44_high, method="cross.sectional"))
(low_age_45_54 <- epi.2by2(age_45_54_low, method="cross.sectional"))
(high_age_45_54 <- epi.2by2(age_45_54_high, method="cross.sectional"))
(low_age_55_64 <- epi.2by2(age_55_64_low, method="cross.sectional"))
(high_age_55_64 <- epi.2by2(age_55_64_high, method="cross.sectional"))
(low_age_65 <- epi.2by2(age_65_low, method="cross.sectional"))
(high_age_65 <- epi.2by2(age_65_high, method="cross.sectional"))
knitr::opts_chunk$set(echo = TRUE)
if (Sys.getenv("USER") == "david") {
knitr::opts_knit$set(root.dir = "/Users/david/Desktop/Dave/school/Epi 514/Final Project/Analysis/")
}
#Matt's system
if (Sys.getenv("USER") == "msgoldberg") {
knitr::opts_knit$set(root.dir = "/Users/msgoldberg/Desktop/Grad_School/Year_1/Q3/EPI514/SSB_Paper/")
}
if (Sys.getenv("USER") == "jscho") {
knitr::opts_knit$set(root.dir = "C:/Users/jscho/OneDrive - UW/SPRING 2020-LAPTOP-7K6NFTGB/EPI 514/")
}
library(tidyverse) #suite of packages for data cleaning and manipulation
library(epiR) #basic epi tools including stratified analysis with Mantel Haenszel
library(survey) #survey package to calculate survey sample weighted prevalence
if (!require(sjPlot)) install.packages("sjPlot")
library(sjPlot)
if (!require(stargazer)) install.packages("stargazer")
library(stargazer)
if (!require(kableExtra)) install.packages("kableExtra")
library(kableExtra)
if (!require(htmlTable)) install.packages("htmlTable")
library(htmlTable)
library(dplyr)
# If you want the CSV choose this option
#data <- read_csv("Data/SSB_master.csv")
# For R data file
load("Data/SSB_master.RData")
data <- SSB_master
#DMC - why is there no cluster design in the weights?
#creating survey weight object
design <- svydesign(ids = ~1,
weights= ~final_weight,
strata = ~ststr,
data=data)
options(survey.lonely.psu = "adjust") #setting for how to deal with a psu with a single observation
# create categorical soda variable 1
data$soda_cat1 <- data$soda
data <- data %>% mutate(soda_cat1 = case_when(soda<1 ~ 0,
soda>=1 & soda<2 ~ 1,
soda>=2 ~ 2))
data$soda_cat1 <- factor(data$soda_cat1,
levels = c(0, 1, 2),
labels = c("<1 sodas per Day", "[1-2) sodas per Day",
"2+ sodas per Day"))
# create categorical juice variable 1
data$juice_cat1 <- data$juice
data <- data %>% mutate(juice_cat1 = case_when(juice<1 ~ 0,
juice>=1 & juice<2 ~ 1,
juice>=2 ~ 2))
data$juice_cat1 <- factor(data$juice_cat1,
levels = c(0, 1, 2),
labels = c("<1 juices per Day", "[1-2) juices per Day",
"2+ juices per Day"))
# Relevel outcome as 1/2 format
data$sleep_01 <- fct_relevel(data$sleep_01,
"<7 Hours of Sleep", "7+ Hours of Sleep")
# Split exposure variable into 2 binary variables for soda and juice
# SODA
# Create binary exposure variable - [1-2) vs <1 (reference category)
data$soda_cat1_low <- as.numeric(data$soda_cat1)
table(data$ssb_cat1_low)
data$soda_cat1_low[data$soda_cat1_low==3] <- NA
data$soda_cat1_low <- factor(data$soda_cat1_low,
levels=c(2,1),
labels=c("[1-2) Sodas per Day", "<1 Sodas per Day"))
# Create binary exposure variable - 2+ vs <1 (reference category)
data$soda_cat1_high <- as.numeric(data$soda_cat1)
table(data$soda_cat1_high)
data$soda_cat1_high[data$soda_cat1_high==2] <- NA
data$soda_cat1_high <- factor(data$soda_cat1_high,
levels=c(3,1),
labels=c("2+ Sodas per Day", "<1 Sodas per Day"))
# OTHER SSBs
# Create binary exposure variable - [1-2) vs <1 (reference category)
data$juice_cat1_low <- as.numeric(data$juice_cat1)
table(data$juice_cat1_low)
data$juice_cat1_low[data$juice_cat1_low==3] <- NA
data$juice_cat1_low <- factor(data$juice_cat1_low,
levels=c(2,1),
labels=c("[1-2) Other SSBs per Day", "<1 Other SSBs per Day"))
# Create binary exposure variable - 2+ vs <1 (reference category)
data$juice_cat1_high <- as.numeric(data$juice_cat1)
table(data$juice_cat1_high)
data$juice_cat1_high[data$juice_cat1_high==2] <- NA
data$juice_cat1_high <- factor(data$juice_cat1_high,
levels=c(3,1),
labels=c("2+ Other SSBs per Day", "<1 Other SSBs per Day"))
#Check newly coded variables
# Soda
with(data, table(soda_cat1_low, soda_cat1))
with(data, table(soda_cat1_high, soda_cat1))
# Other SSBs
with(data, table(juice_cat1_low, juice_cat1))
with(data, table(juice_cat1_high, juice_cat1))
#SSB tables coded correctly
#Checking sleep X ssb tables
# Soda
(base_table_soda_low <- with(data, table(soda_cat1_low, sleep_01)))
(base_table__soda_high <- with(data, table(soda_cat1_high, sleep_01)))
# Juice
(base_table_juice_low <- with(data, table(juice_cat1_low, sleep_01)))
(base_table__juice_high <- with(data, table(juice_cat1_high, sleep_01)))
#Tables set up correctly
# Change factor covariates into numeric
data$age_cat <- as.numeric(data$age_cat)
data$sex_01 <- as.numeric(data$sex_01)
data$education <- as.numeric(data$education)
data$exercise_01 <- as.numeric(data$exercise_01)
data$mental <- as.numeric(data$mental)
data$diabetes_01 <- as.numeric(data$diabetes_01)
data$smoking_01 <- as.numeric(data$smoking_01)
data$bmi_cat <- as.numeric(data$bmi_cat)
# Setting up covariates into tables
# Soda
adj_table_soda_low <- with(data, table(soda_cat1_low, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_soda_high <- with(data, table(soda_cat1_high, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_soda_low <- with(data, table(soda_cat1_low, sleep_01,
age_cat+sex_01+exercise_01+diabetes_01+smoking_01+bmi_cat))
# Other SSB
adj_table_juice_low <- with(data, table(juice_cat1_low, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_juice_high <- with(data, table(juice_cat1_high, sleep_01,
age_cat+sex_01+education+exercise_01+mental+diabetes_01+smoking_01+bmi_cat))
adj_table_juice_low <- with(data, table(juice_cat1_low, sleep_01,
age_cat+sex_01+exercise_01+diabetes_01+smoking_01+bmi_cat))
#adding mental and BMI changes the crude PR - why is this?
# SODA
#unadjusted low PR
(low_base_soda <- epi.2by2(base_table_soda_low, method="cross.sectional"))
#unadjusted high PR
(high_base_soda <- epi.2by2(base_table_soda_high, method="cross.sectional"))
#Checking sleep X ssb tables
# Soda
(base_table_soda_low <- with(data, table(soda_cat1_low, sleep_01)))
(base_table_soda_high <- with(data, table(soda_cat1_high, sleep_01)))
# Juice
(base_table_juice_low <- with(data, table(juice_cat1_low, sleep_01)))
(base_table_juice_high <- with(data, table(juice_cat1_high, sleep_01)))
#Tables set up correctly
# SODA
#unadjusted low PR
(low_base_soda <- epi.2by2(base_table_soda_low, method="cross.sectional"))
#unadjusted high PR
(high_base_soda <- epi.2by2(base_table_soda_high, method="cross.sectional"))
#adjusted low PR
(low_adj_soda <- epi.2by2(adj_table_soda_low, method="cross.sectional"))
#adjusted high PR
(high_adj_soda <- epi.2by2(adj_table_soda_high, method="cross.sectional"))
# OTHER SSBs
#unadjusted low PR
(low_base_juice <- epi.2by2(base_table_juice_low, method="cross.sectional"))
#unadjusted high PR
(high_base_juice <- epi.2by2(base_table_juice_high, method="cross.sectional"))
#adjusted low PR
(low_adj_juice <- epi.2by2(adj_table_juice_low, method="cross.sectional"))
#adjusted high PR
(high_adj_juice <- epi.2by2(adj_table_juice_high, method="cross.sectional"))
adj_table_juice_high <- with(data, table(juice_cat1_high, sleep_01,
age_cat+sex_01+education+exercise_01+diabetes_01+smoking_01+bmi_cat))
(high_adj_juice <- epi.2by2(adj_table_juice_high, method="cross.sectional"))
adj_table_juice_high <- with(data, table(juice_cat1_high, sleep_01,
age_cat+sex_01+education+exercise_01+smoking_01+bmi_cat))
(high_adj_juice <- epi.2by2(adj_table_juice_high, method="cross.sectional"))
adj_table_juice_high <- with(data, table(juice_cat1_high, sleep_01,
age_cat+sex_01+education+smoking_01+bmi_cat))
(high_adj_juice <- epi.2by2(adj_table_juice_high, method="cross.sectional"))
adj_table_juice_high <- with(data, table(juice_cat1_high, sleep_01,
age_cat+sex_01+education+smoking_01))
#adjusted high PR
(high_adj_juice <- epi.2by2(adj_table_juice_high, method="cross.sectional"))
adj_table_soda_low <- with(data, table(soda_cat1_low, sleep_01,
age_cat+sex_01+exercise_01+diabetes_01+smoking_01+bmi_cat))
(low_adj_soda <- epi.2by2(adj_table_soda_low, method="cross.sectional"))
adj_table_soda_low <- with(data, table(soda_cat1_low, sleep_01,
age_cat+sex_01+diabetes_01+smoking_01+bmi_cat))
(low_adj_soda <- epi.2by2(adj_table_soda_low, method="cross.sectional"))
adj_table_soda_low <- with(data, table(soda_cat1_low, sleep_01,
age_cat+sex_01+education+smoking_01))
(low_adj_soda <- epi.2by2(adj_table_soda_low, method="cross.sectional"))
## ERROR
adj_table_soda_high <- with(data, table(soda_cat1_high, sleep_01,
age_cat+sex_01+education+smoking_01))
(high_adj_soda <- epi.2by2(adj_table_soda_high, method="cross.sectional"))
adj_table_juice_low <- with(data, table(juice_cat1_low, sleep_01,
age_cat+sex_01+education+smoking_01))
(low_adj_juice <- epi.2by2(adj_table_juice_low, method="cross.sectional"))
